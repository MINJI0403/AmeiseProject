<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  <mapper namespace="com.man.ameise.dao.ProductDAO">
	 
	 
	 <insert id="setProductAdd" parameterType="ProductVO">
		 <selectKey keyProperty="id" resultType="Long" order="AFTER">
				SELECT MAX(id) from PRODUCT
		</selectKey>
	 INSERT INTO PRODUCT (name,code,description,tag,info,reg_date,update_date,price,discount,option1,option2,option3,status)
		VALUES(#{name},#{code},#{description},#{tag},#{info},#{regDate},#{updateDate},#{price},#{discount},#{option1},#{option2},#{option3},#{status})
		
	 </insert>
	 <!-- DIVISION NUMBER : 1.디테일, 2.상세정보, 3.배너 -->
	 <!-- 섬네일은 제일 첫번째 사진으로 -->
	 <insert id="setProductFileAdd" parameterType="ProductFilesVO">
	 INSERT INTO PRODUCTFILES (division_id,product_id,file_name,ori_name,step)
		VALUES(divisionId,productId,fileName,oriName,step)
	 </insert>
	 
	 <!-- 카테고리 -->
	 <select id="getCategoryList" resultType="CategoryVO">
	 SELECT * from CATEGORY
	 order by  parent_id ASC , step ASC
	 <!-- LEVEL0부터 출력하기 위해 -->
	 </select>
	 <insert id="setCategoryInsert" parameterType="CategoryVO">
	 INSERT INTO CATEGORY(parent_id,title,status,step) VALUES(#{parentId},#{title}#{status},#{step})
	 </insert>
  </mapper>